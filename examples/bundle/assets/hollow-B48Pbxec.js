import{W as X,e as Y,S as Z,D as $,A as ee,b as te,a as oe,h as ne,c as ae,l as re,M as D,P as se,O as ie,f as ce,g as de,B as le,m as we,V as f,n as A}from"./TriangleSplitter-ByAGyBL2.js";import{g as he}from"./lil-gui.module.min-BH_YJbPT.js";import{E as me,B as _,H as k,a as pe}from"./Evaluator-Coej1Gnr.js";let i,l,u,m,W,d,w,B,E=new me;E.attributes=["position","normal","color"];E.useGroups=!1;const b={displayBrush:!0,operation:k};ue();async function ue(){i=new X({antialias:!0}),i.setPixelRatio(window.devicePixelRatio),i.setSize(window.innerWidth,window.innerHeight),i.setClearColor(1118481,1),i.shadowMap.enabled=!0,i.shadowMap.type=Y,document.body.appendChild(i.domElement),u=new Z,m=new $(16777215,3.5),m.position.set(1,2,1),u.add(m,new ee(11583173,.35));const o=m.shadow.camera;m.castShadow=!0,m.shadow.mapSize.setScalar(4096),m.shadow.bias=-1e-5,o.left=o.bottom=-3.5,o.right=o.top=3.5,o.updateProjectionMatrix(),W=new _(fe(),new te({vertexColors:!0,side:oe,roughness:.2})),d=new _(new ne,new ae({color:16777215,transparent:!0,depthWrite:!1,opacity:.1,side:re})),d.scale.setScalar(2),u.add(d),w=new D,u.add(w),l=new se(75,window.innerWidth/window.innerHeight,.1,50),l.position.set(-1.25,1.5,2.5).multiplyScalar(2.5),l.far=100,l.updateProjectionMatrix(),new ie(l,i.domElement);const t=new D(new ce,new de({opacity:.05,depthWrite:!1,transparent:!0}));t.material.color.set(14743546),t.rotation.x=-Math.PI/2,t.scale.setScalar(10),t.position.y=-3,t.receiveShadow=!0,u.add(t),B=new he,B.add(b,"operation",{NONE:-1,HOLLOW_INTERSECTION:k,HOLLOW_SUBTRACTION:pe}),B.add(b,"displayBrush"),window.addEventListener("resize",function(){l.aspect=window.innerWidth/window.innerHeight,l.updateProjectionMatrix(),i.setSize(window.innerWidth,window.innerHeight)},!1),q()}function fe(){let o=new le;const t=new Float32Array(5e3*3*3),n=new Float32Array(5e3*3*3),a=new Float32Array(5e3*3*3),r=new we,h=800,S=h/2,s=120,c=s/2,P=new f,x=new f,O=new f,p=new f,L=new f;for(let e=0;e<t.length;e+=9){const y=Math.random()*h-S,M=Math.random()*h-S,g=Math.random()*h-S,F=y+Math.random()*s-c,G=M+Math.random()*s-c,H=g+Math.random()*s-c,R=y+Math.random()*s-c,N=M+Math.random()*s-c,T=g+Math.random()*s-c,I=y+Math.random()*s-c,V=M+Math.random()*s-c,j=g+Math.random()*s-c;t[e]=F,t[e+1]=G,t[e+2]=H,t[e+3]=R,t[e+4]=N,t[e+5]=T,t[e+6]=I,t[e+7]=V,t[e+8]=j,P.set(F,G,H),x.set(R,N,T),O.set(I,V,j),p.subVectors(O,x),L.subVectors(P,x),p.cross(L),p.normalize();const C=p.x,v=p.y,z=p.z;n[e]=C,n[e+1]=v,n[e+2]=z,n[e+3]=C,n[e+4]=v,n[e+5]=z,n[e+6]=C,n[e+7]=v,n[e+8]=z;const J=y/h+.5,K=M/h+.5,Q=g/h+.5;r.setRGB(J,K,Q),a[e]=r.r,a[e+1]=r.g,a[e+2]=r.b,a[e+3]=r.r,a[e+4]=r.g,a[e+5]=r.b,a[e+6]=r.r,a[e+7]=r.g,a[e+8]=r.b}return o.setAttribute("position",new A(t,3)),o.setAttribute("normal",new A(n,3)),o.setAttribute("color",new A(a,3)),o.scale(.0055,.0055,.0055),o}function q(){requestAnimationFrame(q),d.position.y=2*Math.sin(window.performance.now()*.0025*.5),d.position.x=2*Math.sin(window.performance.now()*.0035*.5),d.position.z=2*Math.sin(window.performance.now()*.002*.5),d.visible=b.displayBrush,d.updateMatrixWorld(!0),b.operation===-1?(w.geometry.dispose(),w.geometry.copy(W.geometry)):(w=E.evaluate(W,d,b.operation,w),w.castShadow=!0,w.receiveShadow=!0),i.render(u,l)}
