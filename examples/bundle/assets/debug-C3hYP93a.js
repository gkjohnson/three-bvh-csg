import{W as G,S as F,D as M,A as P,P as V,O as L,C as x,a as E,F as H,M as v,B as R,b as U,c as j}from"./TriangleSplitter-ByAGyBL2.js";import{g as z}from"./lil-gui.module.min-BH_YJbPT.js";import{G as N,M as k}from"./meshopt_decoder.module-DK5bP9_f.js";import{l as q}from"./debugUtils-Cp__LyS1.js";import{B as O,S as $,E as J}from"./Evaluator-Coej1Gnr.js";import{G as A}from"./GridMaterial-CluEDJjd.js";import{E as K,M as C}from"./EdgesHelper-uoMJ4-z_.js";import{T as Q}from"./TriangleSetHelper-CUowG-cC.js";window.logTriangleDefinitions=q;const X=$,a={displayBrushes:!0,wireframe:!1,enableDebugTelemetry:!0,displayIntersectionEdges:!1,displayTriangleIntersections:!1,displayBrush1BVH:!1,displayBrush2BVH:!1};let n,l,i,s,D,t,e,d,b,h,y,m,f,c,g,I,B=!0,o;const u=new Map;Y();async function Y(){D=document.getElementById("output"),n=new G({antialias:!0}),n.setPixelRatio(window.devicePixelRatio),n.setSize(window.innerWidth,window.innerHeight),n.setClearColor(1118481,1),document.body.appendChild(n.domElement),i=new F,h=new M(16777215,3),h.position.set(-1,2,3),y=new M(16777215,1),y.position.set(-1,2,3).multiplyScalar(-1),i.add(h,y),i.add(new P(11583173,.3)),l=new V(75,window.innerWidth/window.innerHeight,.1,50),l.position.set(1,2,4),l.far=100,l.updateProjectionMatrix(),new L(l,n.domElement),o=new J,o.attributes=["position","normal"],t=new O(new x(1,1,1,50),new A),e=new O(new x(1,1,1,50),new A),t.scale.set(.5,5,.5),e.scale.set(.5,5,.5),e.rotation.x=Math.PI/2,t.material.opacity=.15,t.material.transparent=!0,t.material.depthWrite=!1,t.material.polygonOffset=!0,t.material.polygonOffsetFactor=.2,t.material.polygonOffsetUnits=.2,t.material.side=E,t.material.premultipliedAlpha=!0,e.material.opacity=.15,e.material.transparent=!0,e.material.depthWrite=!1,e.material.polygonOffset=!0,e.material.polygonOffsetFactor=.2,e.material.polygonOffsetUnits=.2,e.material.side=E,e.material.premultipliedAlpha=!0,e.material.roughness=.25,e.material.color.set(15277667),i.add(t,e);let r;r=t.material.clone(),r.side=H,r.opacity=1,r.transparent=!1,r.depthWrite=!0,u.set(t.material,r),r=e.material.clone(),r.side=H,r.opacity=1,r.transparent=!1,r.depthWrite=!0,u.set(e.material,r),u.forEach((w,W)=>{w.enableGrid=!1,W.enableGrid=!1}),d=new v(new R,new U({flatShading:!1,polygonOffset:!0,polygonOffsetUnits:.1,polygonOffsetFactor:.1})),d.material,i.add(d),b=new v(d.geometry,new j({wireframe:!0,color:16777215,opacity:1,transparent:!0})),i.add(b),m=new K,m.color.set(65280),i.add(m),f=new Q,f.color.set(48340),i.add(f),c=new C(t,20),g=new C(e,20),i.add(c,g),I=(await new N().setMeshoptDecoder(k).loadAsync("https://raw.githubusercontent.com/gkjohnson/3d-demo-data/main/models/stanford-bunny/bunny.glb")).scene.children[0].geometry,I.computeVertexNormals(),s=new z,s.add(a,"wireframe"),s.add(a,"displayBrushes"),s.add(a,"enableDebugTelemetry").onChange(()=>B=!0),s.add(a,"displayIntersectionEdges"),s.add(a,"displayTriangleIntersections"),s.add(a,"displayBrush1BVH"),s.add(a,"displayBrush2BVH"),window.addEventListener("resize",function(){l.aspect=window.innerWidth/window.innerHeight,l.updateProjectionMatrix(),n.setSize(window.innerWidth,window.innerHeight)},!1),S()}function S(){requestAnimationFrame(S);const p=a.enableDebugTelemetry;if(B){B=!1,t.updateMatrixWorld(),e.updateMatrixWorld(),c.update(),g.update();const r=window.performance.now();o.debug.enabled=p,o.useGroups=!0,o.evaluate(t,e,X,d),d.material=d.material.map(w=>u.get(w));const T=window.performance.now()-r;D.innerText=`${T.toFixed(3)}ms`,p&&(m.setEdges(o.debug.intersectionEdges),f.setTriangles([...o.debug.triangleIntersectsA.getTrianglesAsArray(),...o.debug.triangleIntersectsA.getIntersectionsAsArray()]))}b.visible=a.wireframe,m.visible=p&&a.displayIntersectionEdges,f.visible=p&&a.displayTriangleIntersections,c.visible=a.displayBrush1BVH,g.visible=a.displayBrush2BVH,t.visible=a.displayBrushes,e.visible=a.displayBrushes,n.render(i,l)}
